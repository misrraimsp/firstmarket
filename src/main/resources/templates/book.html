<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      lang="en">
    <head th:replace="fragments/components::head('Book Details')"></head>
    <body>
        <div class="container-fluid">
            <!-- header -->
            <div th:replace="fragments/components::header"></div>
            <!-- main categories -->
            <div th:replace="fragments/components::mainCatsNavBar"></div>
            <!-- main content -->
            <div class="row my-5">
                <div class="col-sm-1 bg-white"></div>
                <!-- image -->
                <div class="col-sm-3 bg-white">
                    <img class="img-fluid" th:src="@{/image/{id}(id=${book.image.id})}"/>
                </div>
                <!-- book info -->
                <div class="col-sm-6 bg-white">
                    <div class="row">
                        <div class="col-sm-6" >
                            <!-- title -->
                            <div>
                                <p th:unless="${book.title.isBlank()}">
                                    <strong>Title: </strong><span th:text="${book.title}">title</span>
                                </p>
                                <p th:if="${book.title.isBlank()}">
                                    <strong>Title: </strong><span><small><i>unknown</i></small></span>
                                </p>
                            </div>
                            <!-- publisher -->
                            <div>
                                <p th:if="${book.publisher ne null}">
                                    <strong>Publisher: </strong><span th:text="${book.publisher.name}"></span>
                                </p>
                                <p th:unless="${book.publisher ne null}">
                                    <strong>Publisher: </strong><small><i>unknown</i></small>
                                </p>
                            </div>
                            <!-- year -->
                            <div>
                                <p><strong>Year: </strong><span th:text="${book.year}"></span></p>
                            </div>
                            <!-- category -->
                            <div>
                                <p><strong>Category: </strong><span th:text="${book.category.name}"></span></p>
                            </div>
                        </div>
                        <div class="col-sm-6" >
                            <!-- authors -->
                            <div>
                                <p th:unless="${book.authorsString.isBlank()}">
                                    <strong>Authors: </strong><span th:text="${book.authorsString}"></span>
                                </p>
                                <p th:if="${book.authorsString.isBlank()}">
                                    <strong>Authors: </strong><span><small><i>unknown</i></small></span>
                                </p>
                            </div>
                            <!-- isbn -->
                            <div>
                                <p><strong>ISBN: </strong><span th:text="${book.isbn}"></span></p>
                            </div>
                            <!-- language -->
                            <div>
                                <p><strong>Language: </strong><span th:text="${book.language}"></span></p>
                            </div>
                            <!-- pages -->
                            <div>
                                <p><strong>Pages: </strong><span th:text="${book.pages}"></span></p>
                            </div>
                            <!-- price -->
                            <div>
                                <p><strong>Price: </strong><span th:text="${book.price}"></span>â‚¬</p>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-sm-12" >
                            <!-- description -->
                            <div>
                                <p th:unless="${book.description.isBlank()}">
                                    <strong>Description: </strong><span th:text="${book.description}"></span>
                                </p>
                                <p th:if="${book.title.isBlank()}">
                                    <strong>Description: </strong><span><small><i>unknown</i></small></span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- right side buttons -->
                <div class="col-sm-2 bg-white" >
                    <div sec:authorize="!hasRole('ADMIN')">
                        <button class="addBook btn btn-outline-info btn-lg align-center" th:id="'ab-' + ${book.id}">
                            Add to Cart<i class="fas fa-cart-plus ml-2"></i>
                        </button>
                    </div>
                    <div sec:authorize="hasRole('ADMIN')">
                        <a class="btn btn-outline-info btn-xl align-center" th:href="@{/admin/bookForm?id={id}(id=${book.id})}">
                            Edit Book<i class="fas fa-pen fa-2x ml-2"></i>
                        </a>
                    </div>
                </div>
            </div>
            <!-- snackbar -->
            <div th:replace="fragments/components::snackbar"></div>
            <!-- footer -->
            <div th:replace="fragments/components::footer"></div>
        </div>
        <!-- ajax cart -->
        <a th:href="@{/login}" id="loginLink" style="display: none"></a>
        <script th:src="@{/js/ajaxCart.js}"></script>
    </body>
</html>